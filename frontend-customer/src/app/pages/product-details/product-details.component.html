<!-- src/app/components/product-details/product-details.component.html -->
<div class="container py-5" *ngIf="!isLoading; else loadingTemplate">
  <div class="row" *ngIf="product; else errorTemplate">
    
    <!-- Product Images Section -->
    <div class="col-md-6">
      <div class="product-images">
        <!-- Main Image -->
        <div class="main-image mb-3">
          <img 
            [src]="selectedImage || '/assets/images/placeholder.jpg'" 
            [alt]="product.productName"
            class="img-fluid rounded shadow-sm"
            (error)="selectedImage = '/assets/images/placeholder.jpg'"
          >
        </div>
        
        <!-- Thumbnail Images -->
        <div class="thumbnail-images" *ngIf="allImages.length > 1">
          <div class="d-flex flex-wrap gap-2">
            <div 
              *ngFor="let image of allImages; let i = index"
              class="thumbnail-item"
              [class.active]="selectedImage === image"
              (click)="selectImage(image)"
            >
              <img 
                [src]="image" 
                [alt]="'Thumbnail ' + (i + 1)"
                class="img-thumbnail"
                (error)="handleImageError($event)"
              >
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Product Details Section -->
    <div class="col-md-6">
      <div class="product-details">
        <!-- Product SKU -->
        <p class="text-muted mb-2">SKU: {{ product.productSku }}</p>
        
        <!-- Product Name -->
        <h1 class="product-title mb-3">{{ product.productName }}</h1>
        
        <!-- Product Price -->
        <div class="product-price mb-3">
          <h3 class="text-primary fw-bold">â‚¹{{ product.productPrice }}</h3>
          <small class="text-success">Inclusive of all taxes</small>
        </div>

        <!-- Delivery Info -->
        <div class="delivery-info mb-4">
          <p class="mb-1">
            <i class="bi bi-truck text-success"></i>
            Delivery within {{ product.deliveryTimeSpan }}
          </p>
        </div>

        <!-- Quantity Selector -->
        <div class="quantity-selector mb-4">
          <label class="form-label fw-semibold">Quantity:</label>
          <div class="d-flex align-items-center">
            <button 
              class="btn btn-outline-secondary btn-sm" 
              (click)="decreaseQuantity()"
              [disabled]="quantity <= 1"
            >
              <i class="bi bi-dash"></i>
            </button>
            <span class="mx-3 fw-bold">{{ quantity }}</span>
            <button 
              class="btn btn-outline-secondary btn-sm" 
              (click)="increaseQuantity()"
            >
              <i class="bi bi-plus"></i>
            </button>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons mb-4">
          <button 
            class="btn btn-primary btn-lg me-3" 
            (click)="addToCart()"
          >
            <i class="bi bi-cart-plus"></i> Add to Cart
          </button>
          <button 
            class="btn btn-success btn-lg" 
            (click)="buyNow()"
          >
            <i class="bi bi-bag-check"></i> Buy Now
          </button>
        </div>

        <!-- Product Description -->
        <div class="product-description mb-4">
          <h4 class="mb-3">Product Description</h4>
          <div class="description-content">
            <p>{{ product.productDescription }}</p>
          </div>
        </div>

        <!-- Additional Information -->
        <div class="additional-info">
          <div class="accordion" id="productAccordion">
            <!-- Product Details -->
            <div class="accordion-item">
              <h2 class="accordion-header">
                <button 
                  class="accordion-button" 
                  type="button" 
                  data-bs-toggle="collapse" 
                  data-bs-target="#productDetails"
                >
                  Product Details
                </button>
              </h2>
              <div id="productDetails" class="accordion-collapse collapse show">
                <div class="accordion-body">
                  <ul class="list-unstyled">
                    <li><strong>SKU:</strong> {{ product.productSku }}</li>
                    <li><strong>Short Name:</strong> {{ product.productShortName }}</li>
                    <li><strong>Delivery Time:</strong> {{ product.deliveryTimeSpan }}</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Loading Template -->
<ng-template #loadingTemplate>
  <div class="container py-5">
    <div class="row">
      <div class="col-12 text-center">
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
        <p class="mt-3">Loading product details...</p>
      </div>
    </div>
  </div>
</ng-template>

<!-- Error Template -->
<ng-template #errorTemplate>
  <div class="container py-5">
    <div class="row">
      <div class="col-12 text-center">
        <div class="alert alert-danger">
          <h4>Product Not Found</h4>
          <p>{{ error || 'The product you are looking for does not exist.' }}</p>
          <button class="btn btn-primary" routerLink="/products">
            Back to Products
          </button>
        </div>
      </div>
    </div>
  </div>
</ng-template>